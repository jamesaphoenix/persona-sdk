---
title: Distributions
description: Statistical distributions for generating realistic persona attributes
---

# Distributions

Statistical distributions provide realistic variation in persona attributes.

## Distribution Interface

All distributions implement this base interface:

```typescript
interface Distribution<T> {
  sample(): T;
  sampleMany(n: number): T[];
}
```

## NormalDistribution

Gaussian/bell curve distribution for naturally occurring phenomena.

```typescript
class NormalDistribution implements Distribution<number>
```

### Constructor

```typescript
constructor(mean: number, stdDev: number, seed?: number)
```

**Parameters:**
- `mean` - Center of the distribution
- `stdDev` - Standard deviation (spread)
- `seed` - Optional seed for deterministic generation

### Methods

#### sample()

```typescript
sample(): number
```

Returns a single sample from the distribution.

#### sampleMany(n: number)

```typescript
sampleMany(n: number): number[]
```

Returns multiple samples from the distribution.

#### withMin(min: number)

```typescript
withMin(min: number): this
```

Constrains samples to a minimum value.

#### withMax(max: number)

```typescript
withMax(max: number): this
```

Constrains samples to a maximum value.

#### withRounding()

```typescript
withRounding(): this
```

Rounds samples to the nearest integer.

### Example

```typescript
// Age distribution centered at 35 with std dev of 8
const ageDistribution = new NormalDistribution(35, 8)
  .withMin(18)
  .withMax(65)
  .withRounding();

// Income distribution
const incomeDistribution = new NormalDistribution(75000, 20000)
  .withMin(30000);

// Generate samples
const ages = ageDistribution.sampleMany(100);
const income = incomeDistribution.sample();
```

## UniformDistribution

Equal probability distribution between min and max values.

```typescript
class UniformDistribution implements Distribution<number>
```

### Constructor

```typescript
constructor(min: number, max: number, seed?: number)
```

**Parameters:**
- `min` - Minimum value (inclusive)
- `max` - Maximum value (inclusive)
- `seed` - Optional seed for deterministic generation

### Example

```typescript
// Years of experience between 0 and 20
const experienceDistribution = new UniformDistribution(0, 20);

// Random rating between 1 and 5
const ratingDistribution = new UniformDistribution(1, 5);

// Generate samples
const experience = experienceDistribution.sample();
const ratings = ratingDistribution.sampleMany(50);
```

## CategoricalDistribution

Discrete distribution with specified probabilities for each category.

```typescript
class CategoricalDistribution<T> implements Distribution<T>
```

### Types

```typescript
interface CategoryOption<T> {
  value: T;
  probability: number;
}
```

### Constructor

```typescript
constructor(options: CategoryOption<T>[], seed?: number)
```

**Parameters:**
- `options` - Array of category options with probabilities
- `seed` - Optional seed for deterministic generation

**Note:** Probabilities should sum to 1.0. If not, they will be normalized.

### Example

```typescript
// Department distribution
const departmentDistribution = new CategoricalDistribution([
  { value: 'Engineering', probability: 0.4 },
  { value: 'Sales', probability: 0.3 },
  { value: 'Marketing', probability: 0.2 },
  { value: 'Support', probability: 0.1 }
]);

// Subscription tier distribution
const tierDistribution = new CategoricalDistribution([
  { value: 'free', probability: 0.6 },
  { value: 'basic', probability: 0.3 },
  { value: 'premium', probability: 0.1 }
]);

// Generate samples
const department = departmentDistribution.sample();
const tiers = tierDistribution.sampleMany(1000);
```

## BetaDistribution

Flexible distribution for modeling probabilities and percentages.

```typescript
class BetaDistribution implements Distribution<number>
```

### Constructor

```typescript
constructor(alpha: number, beta: number, seed?: number)
```

**Parameters:**
- `alpha` - Shape parameter (α > 0)
- `beta` - Shape parameter (β > 0)
- `seed` - Optional seed for deterministic generation

**Note:** Returns values between 0 and 1.

### Example

```typescript
// Conversion rate distribution (skewed towards lower values)
const conversionRate = new BetaDistribution(2, 5);

// Engagement score (bell-shaped around 0.5)
const engagementScore = new BetaDistribution(5, 5);

// Task completion rate (skewed towards higher values)
const completionRate = new BetaDistribution(8, 2);

// Generate percentage by multiplying by 100
const conversionPercentage = conversionRate.sample() * 100;
```

## ExponentialDistribution

Models time between events or decay processes.

```typescript
class ExponentialDistribution implements Distribution<number>
```

### Constructor

```typescript
constructor(lambda: number, seed?: number)
```

**Parameters:**
- `lambda` - Rate parameter (λ > 0)
- `seed` - Optional seed for deterministic generation

**Note:** Mean = 1/λ

### Example

```typescript
// Time between purchases (average 30 days)
const purchaseInterval = new ExponentialDistribution(1/30);

// Session duration (average 5 minutes)
const sessionDuration = new ExponentialDistribution(1/5);

// Customer lifetime (average 2 years)
const customerLifetime = new ExponentialDistribution(1/24); // in months

// Generate samples
const daysBetweenPurchases = purchaseInterval.sample();
```

## CorrelatedDistribution

Creates distributions with dependencies between attributes.

```typescript
class CorrelatedDistribution
```

### Constructor

```typescript
constructor(
  distributions: Record<string, Distribution<any>>,
  correlations?: CorrelationConfig[]
)
```

### Methods

#### addConditional()

```typescript
addConditional(conditional: ConditionalDistribution): void
```

Adds a conditional dependency between attributes.

#### generate()

```typescript
generate(): Record<string, any>
```

Generates a set of correlated values.

### Example

```typescript
import { CorrelatedDistribution, ConditionalDistribution } from '@jamesaphoenix/persona-sdk';

// Base distributions
const baseDistributions = {
  age: new NormalDistribution(35, 10),
  income: new NormalDistribution(50000, 20000)
};

const correlated = new CorrelatedDistribution(baseDistributions);

// Income increases with age
correlated.addConditional(new ConditionalDistribution(
  'age',
  'income',
  (age) => new NormalDistribution(
    30000 + age * 1000,  // Base + age factor
    15000
  )
));

// Generate correlated values
const person = correlated.generate();
// Older personas will tend to have higher incomes
```

## Seeded Distributions

All distributions support deterministic generation via seeding for reproducible results.

```typescript
import { SeedManager } from '@jamesaphoenix/persona-sdk';

// Set a global seed for testing
SeedManager.setTestSeed(12345);

// Or use context-specific seeds
SeedManager.setSeed('age-distribution', 100);
const ageWithSeed = new NormalDistribution(30, 5, 'age-distribution');

// Distributions using the same seed produce the same sequence
const dist1 = new NormalDistribution(50, 10, 42);
const dist2 = new NormalDistribution(50, 10, 42);

console.log(dist1.sample() === dist2.sample()); // true
```

## Usage with PersonaGroup

```typescript
const group = new PersonaGroup('Customers');

group.generateFromDistributions(1000, {
  age: new NormalDistribution(42, 12).withMin(18).withMax(80),
  occupation: new CategoricalDistribution([
    { value: 'Professional', probability: 0.4 },
    { value: 'Manager', probability: 0.3 },
    { value: 'Executive', probability: 0.2 },
    { value: 'Other', probability: 0.1 }
  ]),
  sex: new CategoricalDistribution([
    { value: 'male', probability: 0.48 },
    { value: 'female', probability: 0.48 },
    { value: 'other', probability: 0.04 }
  ]),
  income: new NormalDistribution(75000, 30000).withMin(20000),
  satisfactionScore: new BetaDistribution(7, 3), // Skewed positive
  daysSinceLastPurchase: new ExponentialDistribution(1/45)
});
```